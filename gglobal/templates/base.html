{% load base_tags static wagtailuserbar compress %}

{% block head %}
    {% include "includes/head.html" %}
{% endblock head %}

<body class="{% block body_class %}template-{{ self.get_verbose_name|slugify }}{% endblock %}" style="margin-top: 0px">
{#% wagtailuserbar %#}

{% block header %}
    {% include "includes/header.html" with parent=site_root calling_page=self %}
    {# Header contains the main_navigation block #}
{% endblock header %}

{% block head-extra %}
{% endblock head-extra %}

{#% block messages %#}
    {#% include "includes/messages.html" %#}
{#% endblock messages %#}


{#% block breadcrumbs %#}
    {#% breadcrumbs %#}
    {# breadcrumbs is defined in base/templatetags/navigation_tags.py #}
{#% endblock breadcrumbs %#}

  {% if messages %}
      {% for message in messages %}
        <div {% if message.tags %} class="alert alert-{{ message.tags }}"{% endif %}>
            <strong>{{ message }}</strong>
        </div>
      {% endfor %}
  {% endif %}

<content>
    {% block content %}
    {% endblock content %}
</content>

    <!-- Footer -->
    <footer class="section bg-gray footer">
        {% include "includes/footer.html" %}
    </footer>
    <!--div id="search">
    <button type="button" class="btn-custom btn-sm close">×</button>
    <form method="GET" action="">
        <input type="search" value="" name="q" placeholder="Введите то, что хотите найти" />
        <input class="btn btn-custom btn-sm" type="submit" value="Найти" />
    </form>
   </div-->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <!--script src="{#% static 'js/jquery-2.1.4.min.js' %#}"></script>
    <script src="{#% static 'js/bootstrap.min.js' %#}"></script-->

    <!-- Theme JavaScript -->
    <!--script src="{#% static 'js/clean-blog.min.js' %#}"></script-->
    <style>
      

#search {
  position: fixed;
  top: 0px;
  left: 0px;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);

  -webkit-transition: all 0.5s ease-in-out;
  -moz-transition: all 0.5s ease-in-out;
  -o-transition: all 0.5s ease-in-out;
  -ms-transition: all 0.5s ease-in-out;
  transition: all 0.5s ease-in-out;

  -webkit-transform: translate(0px, -100%) scale(0, 0);
  -moz-transform: translate(0px, -100%) scale(0, 0);
  -o-transform: translate(0px, -100%) scale(0, 0);
  -ms-transform: translate(0px, -100%) scale(0, 0);
  transform: translate(0px, -100%) scale(0, 0);

  opacity: 0;
}

#search.open {
  -webkit-transform: translate(0px, 0px) scale(1, 1);
  -moz-transform: translate(0px, 0px) scale(1, 1);
  -o-transform: translate(0px, 0px) scale(1, 1);
  -ms-transform: translate(0px, 0px) scale(1, 1);
  transform: translate(0px, 0px) scale(1, 1);
  opacity: 1;
  z-index: 999;
}

#search input[type="search"] {
  position: absolute;
  top: 50%;
  width: 100%;
  color: rgb(255, 255, 255);
  background: rgba(0, 0, 0, 0);
  font-size: 60px;
  font-weight: 300;
  text-align: center;
  border: 0px;
  margin: 0px auto;
  margin-top: -51px;
  padding-left: 30px;
  padding-right: 30px;
  outline: none;
}
#search .btn {
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: 61px;
  margin-left: -45px;
}
#search .close {
  position: fixed;
  top: 15px;
  right: 15px;

  opacity: 1;
  padding: 10px 15px;
  font-size: 20px;
}


    </style>
    <script>
    $(document).ready(function(){
        $('#toggle-search').click(function(){
            $('.bootsnipp-search').toggleClass('open');
            $(" .bootsnipp-search .input-group > input").val(""),
            setTimeout(function() {
                $(".bootsnipp-search .form-control").focus()
            }, 100)
        });
    })
    </script>
    <script>
      $(function () {
        $('a[href="#search"]').on('click', function(event) {
          event.preventDefault();
          $('#search').addClass('open');
          $('#search > form > input[type="search"]').focus();
        });

        $('#search, #search button.close').on('click keyup', function(event) {
          if (event.target == this || event.target.className == 'close' || event.keyCode == 27) {
            $(this).removeClass('open');
          }
        });

      });
    </script>



    <!— Yandex.Metrika counter —> <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter37578360 = new Ya.Metrika({ id:37578360, clickmap:true, trackLinks:true, accurateTrackBounce:true, webvisor:true, trackHash:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/37578360" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!— /Yandex.Metrika counter —>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-91819614-1', 'auto');
    ga('send', 'pageview');

    </script>
    {# JS libs #}
    <script type="text/javascript">var csrftoken = Cookies.get('csrftoken');</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script>
    <!--script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script-->
    <script src="{% static 'js/init.js' %}"></script>
    <script src="{% static 'js/libs/raven.min.js' %}"></script>
    {% compress js %}
    <!-- js placed at the end of the document so the pages load faster -->
    <script src="{% static 'turbolinks/turbolinks.js' %}"></script>
    <script src="{% static 'js/jquery.easing.1.3.min.js' %}"></script>
    <script src="{% static 'js/jquery.sticky.js' %}"></script>
    <script src="{% static 'js/jquery.ajaxchimp.js' %}"></script>
    <script src="{% static 'js/jquery.app.js' %}"></script>
    <script src="{% static 'js/switcher.js' %}"></script>
    <script src="{% static 'js/parsley.min.js' %}"></script>
    <script src="{% static 'js/jquery.magnific-popup.min.js' %}"></script>
    {% endcompress %}
    {% block extrahead %}
    {% endblock extrahead %}

    <script type="text/javascript">
    function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
    }
    $.ajaxSetup({
        beforeSend: function(xhr, settings) {
            if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
                xhr.setRequestHeader("X-CSRFToken", csrftoken);
            }
        }
    });
</script>
    {% if user.is_authenticated %}<script type="text/javascript" src="{% url 'admin:jsi18n' %}"></script>{% endif %}

<script type="text/javascript">

    $.ajaxSetup({ 
     beforeSend: function(xhr, settings) {
         function getCookie(name) {
             var cookieValue = null;
             if (document.cookie && document.cookie != '') {
                 var cookies = document.cookie.split(';');
                 for (var i = 0; i < cookies.length; i++) {
                     var cookie = jQuery.trim(cookies[i]);
                     // Does this cookie string begin with the name we want?
                     if (cookie.substring(0, name.length + 1) == (name + '=')) {
                         cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                         break;
                     }
                 }
             }
             return cookieValue;
         }
         if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
             // Only send the token to relative URLs i.e. locally.
             xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
         }
     } 
});
</script>

        <script>
        $('ul.dropdown-menu [data-toggle=dropdown]').on('click', function(event) {
         event.preventDefault();
         event.stopPropagation();
         $(this).parent().addClass('open');
         var menu = $(this).parent().find("ul");
         var menupos = menu.offset();
         if ((menupos.left + menu.width()) + 30 > $(window).width()) {
         var newpos = - menu.width();
         } else {
         var newpos = $(this).parent().width();
         }
         menu.css({ left:newpos });
        });
        </script>
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 tooltipss and media queries -->
        <!--[if lt IE 9]>
          <script src="js/html5shiv.js"></script>
          <script src="js/respond.min.js"></script>
    <![endif]-->
</body>

</html>